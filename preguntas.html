<!DOCTYPE html>
<html>
  <head>
    <meta name="tipo_contenido" content="text/html;" http-equiv="content-type" charset="utf-8">
	<title>Preguntas</title>
    <link rel='stylesheet' type='text/css' href='estilos/style.css' />
	<link rel='stylesheet'
		   type='text/css'
		   media='only screen and (min-width: 530px) and (min-device-width: 481px)'
		   href='estilos/wide.css' />
	<link rel='stylesheet'
		   type='text/css'
		   media='only screen and (max-width: 480px)'
		   href='estilos/smartphone.css' />
  </head>

  <body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <div id='page-wrap' >
	<header class='main' id='h1'>
		<span class="right"><a href="registro">Registrarse</a></span>
      	<span class="right"><a href="login">Login</a></span>
      	<span class="right" style="display:none;"><a href="/logout">Logout</a></span>
		<h2>Quiz: Juego de las preguntas</h2>
    </header>
	<nav class='main' id='n1' role='navigation'>
		<span><a href='layout.html'>Inicio</a></spam>
		<span><a href='preguntas.html'>Insertar Pregunta</a></spam>
		<span><a href='creditos.html'>Creditos</a></spam>
	</nav>

    <section class="main" id="s1">
    <div>
        <form id='fpreguntas' name='fpreguntas' action=’prueba.php’>
        	<p> Dirección de correo del autor de la pregunta <strong>(*)</strong></p>
        	<input id="dirCorreo" type="text" name="nombreDirCorreo" autocomplete="off" placeholder="Ej: tom001@ikasle.ehu.eus"/>

        	<p> Enunciado de la pregunta <strong>(*)</strong></p>
        	<input id="pregunta" type="text" name="nombrePregunta" autocomplete="off" placeholder="Ej: Elemento HTML"/>

        	<p>Respuesta correcta <strong>(*)</strong></p>
        	<input id="respCorrecta" type="text" name="nombreRespCorrecta" autocomplete="off" placeholder="Ej: <TABLE>"/>

            <p>Respuesta incorrecta 1 <strong>(*)</strong></p>
        	<input id="respIncorrecta1" type="text" name="nombreRespIncorrecta1" autocomplete="off" placeholder="Introducir una respuesta incorrecta"/>

            <p>Respuesta incorrecta 2 <strong>(*)</strong></p>
        	<input id="respIncorrecta2" type="text" name="nombreRespIncorrecta2" autocomplete="off" placeholder="Introducir una respuesta incorrecta"/>

            <p>Respuesta incorrecta 3 <strong>(*)</strong></p>
        	<input id="respIncorrecta3" type="text" name="nombreRespIncorrecta3" autocomplete="off" placeholder="Introducir una respuesta incorrecta"/>

            <p>Complejidad de la pregunta entre 0 y 5 <strong>(*)</strong></p>
        	<input id="complejidad" type="text" name="nombreComplejidad" autocomplete="off" placeholder="Ej: 5"/>

            <p>Tema de la pregunta <strong>(*)</strong></p>
            <input id="tema" type="text" name="nombreTema" autocomplete="off" placeholder="Ej: HTML"/>

            <button id="botonEnviar">Enviar pregunta</button>
        </form>
	</div>
    </section>
	<footer class='main' id='f1'>
		<a href='https://github.com/tszemzo/proyectoSW'>Link GITHUB</a>
	</footer>
    </div>

<script>
	$("#botonEnviar").click(function(){
    	//valida campos vacios;
        var form = $('#fpreguntas');
        if(validarNulos(form)) alert("Algun campo obligatorio vacio");
    	//validar correo electronico;
        var correoRegex = /^([a-zA-Z_.+-])+[0-9]{3}\@ikasle.ehu.eus+$/;
        var correo = $("#dirCorreo").val();
        validarRegex(correo,correoRegex,"Correo en formato erroneo");
        //valida complejidad;
        var complejidad = $("#complejidad").val();
        var complejidadRegex = /^[0-5]$/;
        validarRegex(complejidad,complejidadRegex,"La complejidad debe estar entre 0 y 5!");
        // valida pregunta
        var pregunta = $("#pregunta").val();
        var preguntaRegex = /^([a-zA-Z_.?+-¨ ¨]){10,}$/;
        validarRegex(pregunta,preguntaRegex,"La pregunta debe tener al menos 10 caracteres!");
	})

    function validarNulos(obj){
        //Función para comprobar los campos de texto
        algunoVacio = false;
        obj.find("input").each(function() {
            var $this = $(this);
            if( $this.val().length <= 0 ) algunoVacio = true;
        });
        return algunoVacio;
    }

    function validarRegex(valor,expresion,mensaje){
		if(!expresion.test(valor)){
			alert(mensaje);
		}
    }

</script>
</body>
</html>
